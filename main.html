<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>School Inventory System</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: skyblue;
    text-align: center;
  }
  #app {
    margin-top: 50px;
  }
  table {
    border-collapse: collapse;
    width: 80%;
    margin: 20px auto;
  }
  th, td {
    border: 1px solid black;
    padding: 8px;
  }
  th {
    background-color: #ddd;
  }
</style>
</head>
<body>

<div id="app">
  <h1>School Inventory System</h1>
  <form id="inventoryForm">
    <label for="itemName">Item Name:</label>
    <select id="itemName">
      <option value="uniform">Uniform</option>
      <option value="belt">Belt</option>
      <option value="shoe">Shoe</option>
      <option value="socks">Socks</option>
      <option value="tie">Tie</option>
      <option value="books">Books</option>
      <!-- Add other options -->
    </select><br><br>
    <label for="size">Size (if applicable):</label>
    <input type="text" id="size"><br><br>
    <label for="section">Section:</label>
    <input type="text" id="section"><br><br>
    <label for="inputQuantity">Input Quantity:</label>
    <input type="number" id="inputQuantity"><br><br>
    <button type="button" onclick="addItem()">Add Item</button>
    <button type="button" onclick="exportInventory()">Export Inventory</button>
  </form>
  <table id="inventoryTable">
    <thead>
      <tr>
        <th>Item Name</th>
        <th>Size</th>
        <th>Section</th>
        <th>Total Quantity</th>
        <th>Remaining Quantity</th>
      </tr>
    </thead>
    <tbody id="inventoryBody">
    </tbody>
  </table>
  <button onclick="printInventory()">Print Inventory</button>
</div>

<script>
  // Function to load inventory from localStorage
  function loadInventory() {
    var inventory = localStorage.getItem('inventory');
    if (inventory) {
      document.getElementById('inventoryBody').innerHTML = inventory;
    }
  }

  // Load inventory on page load
  loadInventory();

  // Function to save inventory to localStorage
  function saveInventory() {
    var table = document.getElementById('inventoryBody').innerHTML;
    localStorage.setItem('inventory', table);
  }

  // Function to add an item to inventory
  function addItem() {
    var itemName = document.getElementById('itemName').value;
    var size = document.getElementById('size').value;
    var section = document.getElementById('section').value;
    var inputQuantity = parseInt(document.getElementById('inputQuantity').value);

    var totalQuantity = inputQuantity; // For simplicity, assuming input is total quantity
    var remainingQuantity = totalQuantity - inputQuantity;

    var table = document.getElementById('inventoryBody');
    var row = table.insertRow();
    var cell1 = row.insertCell(0);
    var cell2 = row.insertCell(1);
    var cell3 = row.insertCell(2);
    var cell4 = row.insertCell(3);
    var cell5 = row.insertCell(4);

    cell1.innerHTML = itemName;
    cell2.innerHTML = size;
    cell3.innerHTML = section;
    cell4.innerHTML = totalQuantity;
    cell5.innerHTML = remainingQuantity;

    // Save to local storage
    saveInventory();
  }

  // Function to print inventory
  function printInventory() {
    window.print();
  }

  // Function to export inventory as CSV
  function exportInventory() {
    var table = document.getElementById('inventoryTable');
    var rows = table.querySelectorAll('tr');
    var csv = [];
    for (var i = 0; i < rows.length; i++) {
      var row = [], cols = rows[i].querySelectorAll('td, th');
      for (var j = 0; j < cols.length; j++) {
        row.push(cols[j].innerText);
      }
      csv.push(row.join(','));
    }
    var csvContent = 'data:text/csv;charset=utf-8,' + csv.join('\n');
    var encodedUri = encodeURI(csvContent);
    var link = document.createElement('a');
    link.setAttribute('href', encodedUri);
    link.setAttribute('download', 'inventory.csv');
    document.body.appendChild(link);
    link.click();
  }

  // Periodically check for updates in the inventory (every 5 seconds)
  setInterval(function() {
    loadInventory();
  }, 5000);
</script>

</body>
</html>
